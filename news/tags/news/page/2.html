<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>
      MapStruct - Java Bean Mappings, the Easy Way!
    </title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <style>
      body {
        padding-top: 60px;
      }
    </style>
    <script src="http://mapstruct.org/javascripts/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="http://mapstruct.org/javascripts/bootstrap-tab.js" type="text/javascript"></script>
    <script src="http://mapstruct.org/javascripts/bootstrap-scrollspy.js" type="text/javascript"></script>
    <script src="http://mapstruct.org/javascripts/bootstrap-affix.js" type="text/javascript"></script>
    <link href="http://mapstruct.org/stylesheets/styles.css" rel="stylesheet" type="text/css">
    <link href="http://mapstruct.org/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
    <link href="http://mapstruct.org/stylesheets/gh-fork-ribbon.css" rel="stylesheet" type="text/css">
    <!--[if IE]>
      <link href="http://mapstruct.org/stylesheets/gh-fork-ribbon.ie.css" rel="stylesheet" type="text/css">
    <![endif]-->
    <link href="http://mapstruct.org/stylesheets/prettify.css" rel="stylesheet" type="text/css">
    <script src="http://mapstruct.org/javascripts/prettify.js" type="text/javascript"></script>
    <script>
      (function(jQuery){
        jQuery( document ).ready( function() {
          prettyPrint();
        } );
      }(jQuery))
    </script>
  </head>
  <body>
    <div class="navbar navbar-fixed-top">
      <div class="hidden-phone pull-right" style="padding-top: 11px; margin-right: 120px;">
        <div class="g-plusone" data-size="medium"></div>
        <script>
          (function() {
            var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
            po.src = 'https://apis.google.com/js/plusone.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
          })();
        </script>
      </div>
      <div class="hidden-phone github-fork-ribbon-wrapper right">
        <div class="github-fork-ribbon">
          <a href="https://github.com/mapstruct/mapstruct">Fork me on GitHub</a>
        </div>
      </div>
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="/">MapStruct</a>
          <ul class="nav">
            <li>
              <a href="/">Home</a>
            </li>
            <li>
              <a href="http://mapstruct.org/news">News</a>
            </li>
            <li>
              <a href="http://mapstruct.org/documentation">Documentation</a>
            </li>
            <li>
              <a href="http://mapstruct.org/download">Download</a>
            </li>
            <li>
              <a href="http://mapstruct.org/getting-help">Getting help</a>
            </li>
            <li>
              <a href="http://mapstruct.org/contributing">Development</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="span12">
          <h2>News <a href="/news.atom" title="MapStruct news feed"><img src="/images/feed-icon-28x28.png" style="padding-bottom: 3px;"/></a></h2>
        </div>
      </div>
      <div class="row">
        <div class="span12">
          <div class="post">
            <h3>
              <a href="/news/2015/11/25/mapstruct-1_0_Final-released.html">MapStruct 1.0 Final released</a>
            </h3>
            <h5>
              Gunnar Morling, 25 November 2015
            </h5>
            <div>
              
              <p>It’s with great pleasure and excitement that I announce the final release of MapStruct 1.0!</p>
              
              <p>MapStruct is a source code generator for efficient, type-safe mappings between Java bean types, based on <a href="/documentation/#section-def-mapper">annotated interface definitions</a>. It works in your command line builds (e.g. via Maven or Gradle) as well as your favourite IDE. The advantages of this approach are manifold:</p>
              
              <ul>
              <li><strong>Great performance:</strong> Plain method invocations only, no use of reflection</li>
              
              <li><strong>Compile-time type safety:</strong> Only objects and attributes actually mapping to each other can be mapped, no accidental mapping of an order entity into a customer DTO etc.</li>
              
              <li><strong>Self-contained code:</strong> no runtime dependencies</li>
              
              <li><strong>Early validation and fast feedback:</strong> Clear error-reports right at build time if mappings are not complete or incorrect</li>
              
              <li><strong>Easy to debug:</strong> You can inspect the generated mapping in your IDE</li>
              </ul>
              
              <p>If you are new to MapStruct, I recommend you check out the “MapStruct in 2 minutes” section on the <a href="/">homepage</a> to see what MapStruct can do for you and how it works.</p>
              
              <h3 id="looking_back">Looking back…</h3>
              
              <p>When I started the project over three years ago, I was quite fond of the idea of addressing the mapping issue with code generation, but I didn’t really expect much interest by others. But, the wonders of open source happened and people started to ask questions about the project on the mailing list, filed feature and pull requests, <a href="http://tux2323.blogspot.de/2014/03/mapstruct-java-bean-mappings.html">presented</a> <a href="http://blog.goyello.com/2015/08/11/take-the-map-dto-survival-code/">MapStruct</a> <a href="http://www.frank-rahn.de/java-bean-mapper/">in</a> <a href="http://javabarista.blogspot.de/2015/04/bean-mapping-mit-mapstruct.html">blog</a> <a href="https://samerabdelkafi.wordpress.com/2015/10/18/mapstruct/">posts</a> and <a href="http://www.muchsoft.com/presentations/MATHEMA-Campus-2015-MapStruct.pdf">conference</a> <a href="http://de.slideshare.net/inovex/mapstruct-der-neue-stern-am-beanmapping-himmel">talks</a>, etc. Apparently, the project scratched an itch for many.</p>
              
              <p>A small - yet very active - community grew.</p>
              
              <p>Despite it’s pre-final status until today, MapStruct is very solid and stable and has been used successfully by lots of projects in a wide range of industries. The <a href="http://jhipster.github.io/using_dtos.html">recent integration</a> into the JHipster stack greatly increased the project’s exposure and is a strong catalyst for further rising adoption. I can’t give you a list of Fortune 500 companies using it, but I bet some are :)</p>
              
              <p>It’s a whole bunch of awesome people who have made this a reality. The project wouldn’t be near where it is today without their great ideas and hard work. It was <a href="https://twitter.com/AndreasGudian">Andreas Gudian</a> who confirmed me in the usefulness of the project, so we picked it up again together after my initial enthusiam had shortly been fading a bit. Not much later <a href="https://twitter.com/sjaakderksen">Sjaak Derksen</a> arrived to the scene and right from the spot he helped with hacking on the toughest issues which Andreas and I had not felt like attacking.</p>
              
              <p>In addition to these two fine guys many more have been contributing to the MapStruct code base over time in one way or the other: Christian Schuster, Christophe Labouisse, Dilip Krishnan, Ewald Volkert, Ivo Smid, Lars Wetzer, Lukasz Kryger, Michael Pardo, Mustafa Caylak, Paul Strugnell, Remko Plantenga, Sebastian Hasait, Stefan Rademacher, Timo Eckhardt, Tomek Gubala and anyone I may have forgotten.</p>
              
              <p>A huge thank you to all of you! Special kudos go to Gerd Wütherich who designed the logo for project, which had been a missing piece for the final release for quite some time :)</p>
              
              <h3 id="and_forward">…and forward</h3>
              
              <p>With MapStruct 1.0 through the door, it’s time to think about what’s coming next.</p>
              
              <p>Based on user feedback, we’ve collected quite some ideas for a 1.1 release, be it support for custom bean constructors, direct field access or a small expression language for more concise and powerful inline mapping expressions. You input matters, so please raise your voice if you think something useful is missing from MapStruct.</p>
              
              <p>Another focus of attention will be on the MapStruct <a href="https://github.com/mapstruct/mapstruct-eclipse">Eclipse plug-in</a> which already is quite capable but should be even more so with the planned refactoring support, more quick fixes etc. Also we’ve planned to make it available through the Eclipse market place. Last but not least, we’ll spend some time on improving the project website - especially the <a href="/documentation">documentation page</a> - in order to make all the contents added over time accessible in a better way.</p>
              
              <p>But in the meantime, enjoy the MapStruct 1.0.0.Final release!</p>
              
              <p>It’s already on <a href="http://search.maven.org/#search|ga|1|g%3A%22org.mapstruct%22">Maven Central</a> and <a href="http://sourceforge.net/projects/mapstruct/files/1.0.0.Final/">SourceForge</a>. Functionally, the Final is the same as CR2, just <a href="https://github.com/mapstruct/mapstruct/issues?q=milestone%3A1.0.0.Final+is%3Aclosed">some remaining bugs</a> have been fixed. We’d love to be hearing from you, so if you have any ideas, questions or other feedback on MapStruct, please get in touch through the following channels and we’ll be glad to help:</p>
              
              <ul>
              <li>Get help at the <a href="https://groups.google.com/forum/?fromgroups#!forum/mapstruct-users">mapstruct-users</a> group</li>
              
              <li>Report bugs and feature requests via the <a href="https://github.com/mapstruct/mapstruct/issues">issue tracker</a></li>
              
              <li>Follow <a href="https://twitter.com/GetMapStruct">@GetMapStruct</a> on Twitter</li>
              
              <li>Follow MapStruct on <a href="https://plus.google.com/u/0/118070742567787866481/posts">Google+</a></li>
              </ul>
              
              <p>Happy Mapping!</p>
            </div>
          </div>
          <div class="post">
            <h3>
              <a href="/news/2015/08/27/mapstruct-1_0_0_CR2-released.html">MapStruct 1.0.0.CR2 released</a>
            </h3>
            <h5>
              Andreas Gudian, 27 August 2015
            </h5>
            <div>
              
              <p>It is my pleasure to announce the second candidate release of MapStruct 1.0!</p>
              
              <p>With this release, we’re fixing several bugs that showed up after our first candidate release. But we also received some great new feature contributions from the community that we wanted to include in our 1.0 release, so we decided to build this second candidate release before calling it a <em>final</em>. Highlights of this release are:</p>
              
              <ul>
              <li>Configure package and class name for the generated mapper implementations.</li>
              
              <li>Define default values for target properties in case the source property is <code>null</code>.</li>
              
              <li>The decorator feature now fully works with Spring and JSR 330 and the documentation has been clarified on how to use decorators with all our supported component models (CDI, Spring, JSR 330, default).</li>
              </ul>
              
              <p>The complete list of 19 closed issues can be found in the <a href="https://github.com/mapstruct/mapstruct/issues?q=milestone%3A1.0.0.CR2">change log</a>.</p>
              
              <p>The MapStruct team calls out a big <em>Thank you!</em> to everyone contributing to this release: <a href="https://github.com/vgt-tomek">Tomek Gubala</a>, <a href="https://github.com/bedla">Ivo Smid</a>, <a href="https://github.com/luxmeter">Mustafa Caylak</a>, and <a href="https://github.com/ggtools">Christophe Labouisse</a>!</p>
              
              <h3 id="download">Download</h3>
              
              <p>To fetch MapStruct 1.0.0.CR2 via Maven, Gradle or similar dependency management tools, use the following GAV coordinates:</p>
              
              <ul>
              <li><a href="http://search.maven.org/#artifactdetails|org.mapstruct|mapstruct|1.0.0.CR2|jar">org.mapstruct:mapstruct:1.0.0.CR2</a> for the annotation JAR (to be used with Java &lt;= 7) or <a href="http://search.maven.org/#artifactdetails|org.mapstruct|mapstruct-jdk8|1.0.0.CR2|jar">org.mapstruct:mapstruct-jdk8:1.0.0.CR2</a> (for usage with Java &gt;= 8)</li>
              
              <li><a href="http://search.maven.org/#artifactdetails|org.mapstruct|mapstruct-processor|1.0.0.CR2|jar">org.mapstruct:mapstruct-processor:1.0.0.CR2</a> for the annotation processor.</li>
              </ul>
              
              <p>Alternatively, you can download distribution bundles (ZIP, TAR.GZ) from <a href="http://sourceforge.net/projects/mapstruct/files/1.0.0.CR2/">SourceForge</a> or from <a href="https://bintray.com/mapstruct/bundles/mapstruct-dist/1.0.0.CR2/">BinTray</a>.</p>
              
              <h3 id="configure_package_and_class_name_for_the_generated_mapper_implementations">Configure package and class name for the generated mapper implementations</h3>
              
              <p>By default, MapStruct generates the mapper implementation with the class name suffix “Impl” in the same package as the declared mapper interface or abstract class.</p>
              
              <p>If a project follows different naming conventions, package-dependency rules or simply a ambiguity needs to be resolved, the package name and the class name of the generated implementation can be configured:</p>
              <pre class='prettyprint linenums'>&#x000A;package com.examples.mappers;&#x000A;&#x000A;...&#x000A;&#x000A;@Mapper(implementationPackage = "&lt;PACKAGE_NAME&gt;.internal", implementationClass = "MapStruct&lt;CLASS_NAME&gt;Impl")&#x000A;public interface PersonMapper {&#x000A;    PersonMapper INSTANCE = Mappers.getMapper( PersonMapper.class );&#x000A;&#x000A;    PersonDto toPersonDto(Person person);&#x000A;}</pre>
              <p>In the example above, the mapper implementation would be generated to the package <code>com.examples.mappers.internal</code> with the class name <code>MapStructPersonMapperImpl</code>. As you might have already guessed, the strings <code>&lt;PACKAGE_NAME&gt;</code> and <code>&lt;CLASS_NAME&gt;</code> are replaced with the package name and the class name of the mapper interface or abstract class for which the implementation is generated.</p>
              
              <p>These options are also available in the annotation <code>@MapperConfig</code>, so you can configure this once for all mappers that use the same <a href="http://mapstruct.org/documentation/#section-shared-config">@MapperConfig</a> type.</p>
              
              <p>If you are using the component model <code>default</code> (i.e. <code>Mappers.get(...)</code>) to obtain your mapper instances, the generator will create an SPI file in <em>META-INF/services/</em> for each mapper with a customized naming pattern. The implementation of <code>Mappers</code> finds those implementation classes using the <code>ServiceLoader</code> API.</p>
              
              <h3 id="default_values_for_target_properties_in_case_the_source_property_is_null">Default values for target properties in case the source property is null</h3>
              
              <p>Default values can be specified to set a predefined value to a target property if the corresponding source property is <code>null</code>.</p>
              <pre class='prettyprint linenums'>&#x000A;@Mapper&#x000A;public interface PersonMapper {&#x000A;   @Mapping(target = "middleName", defaultValue = ""),&#x000A;   PersonDto toPersonDto(Person person);&#x000A;}</pre>
              <p>The implementation that is generated for the example above would set the property <code>middleName</code> in the result object to the empty String <code>&quot;&quot;</code> in case <code>person.getMiddleName() == null</code>. If the target property for which the default assignment shall be done is not of type <code>String</code>, the usual type conversion / type mapping mechanism is applied.</p>
              
              <h3 id="whats_next">What’s next?</h3>
              
              <p>With CR2 out, we want to release MapStruct 1.0 Final as soon as possible. We won’t add any new features or large refactorings for 1.0 and will allow only bugfixes. Based on the number of bugs reported against CR2, we should be ready to build the Final within the next couple of weeks.</p>
              
              <p>In the mean time, you’re invited to try out the MapStruct <a href="https://github.com/mapstruct/mapstruct-eclipse">Eclipse plug-in</a>. Although it’s in an early stage, it already contains some handy content-assists (e.g. for <code>source</code> and <code>target</code> property names in the <code>@Mapping</code> annotation) and quick-fixes for some common mapping errors detected by MapStruct.</p>
              
              <p>Any feedback is welcome, just post a comment below or get in touch through the following channels:</p>
              
              <ul>
              <li>Get help at the <a href="https://groups.google.com/forum/?fromgroups#!forum/mapstruct-users">mapstruct-users</a> group</li>
              
              <li>Report bugs and feature requests via the <a href="https://github.com/mapstruct/mapstruct/issues">issue tracker</a></li>
              
              <li>Follow <a href="https://twitter.com/GetMapStruct">@GetMapStruct</a> on Twitter</li>
              
              <li>Follow MapStruct on <a href="https://plus.google.com/u/0/118070742567787866481/posts">Google+</a></li>
              </ul>
            </div>
          </div>
          <div class="post">
            <h3>
              <a href="/news/2015/06/11/mapstruct-1_0_0_CR1-has-landed.html">MapStruct 1.0.0.CR1 has landed</a>
            </h3>
            <h5>
              Gunnar Morling, 11 June 2015
            </h5>
            <div>
              
              <p>I am very happy to announce the first candidate release of MapStruct 1.0!</p>
              
              <p>As we are approach MapStruct 1.0, this release is primarily focused on ironing out remaining glitches and fixing bugs. But there are also some new features:</p>
              
              <ul>
              <li>A new SPI for discovering property accessors not adhering to the JavaBeans convention</li>
              
              <li>The decorator feature can now also be used with Spring</li>
              
              <li>Support for before- and after-mapping lifecycle hooks</li>
              </ul>
              
              <p>The complete list of 24 closed issues can be found in the <a href="https://github.com/mapstruct/mapstruct/issues?q=milestone%3A1.0.0.CR1">change log</a>.</p>
              
              <p>A big thank you to everyone contributing to this release: <a href="https://github.com/sjaakd/">Sjaak Derksen</a>, <a href="https://github.com/agudian">Andreas Gudian</a>, <a href="https://github.com/chschu">Christian Schuster</a>, <a href="https://github.com/ps-powa">Paul Strugnell</a> and <a href="https://github.com/sonata82">Remko Plantenga</a>!</p>
              
              <h3 id="download">Download</h3>
              
              <p>To fetch MapStruct 1.0.0.CR1 via Maven, Gradle or similar dependency management tools, use the following GAV coordinates:</p>
              
              <ul>
              <li><a href="http://search.maven.org/#artifactdetails|org.mapstruct|mapstruct|1.0.0.CR1|jar">org.mapstruct:mapstruct:1.0.0.CR1</a> for the annotation JAR (to be used with Java &lt;= 7) or <a href="http://search.maven.org/#artifactdetails|org.mapstruct|mapstruct-jdk8|1.0.0.CR1|jar">org.mapstruct:mapstruct-jdk8:1.0.0.CR1</a> (for usage with Java &gt;= 8)</li>
              
              <li><a href="http://search.maven.org/#artifactdetails|org.mapstruct|mapstruct-processor|1.0.0.CR1|jar">org.mapstruct:mapstruct-processor:1.0.0.CR1</a> for the annotation processor.</li>
              </ul>
              
              <p>Alternatively, you can download distribution bundles (ZIP, TAR.GZ) from <a href="http://sourceforge.net/projects/mapstruct/files/1.0.0.CR1/">SourceForge</a>.</p>
              
              <h3 id="spi_for_property_accessor_discovery">SPI for property accessor discovery</h3>
              
              <p>By default, MapStruct expects property getters and setters adhering to the <a href="http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html">JavaBeans specification</a>.</p>
              
              <p>In some cases though models to be mapped derive from this convention. E.g. builder objects could expose property write accessors such as <code>withName()</code> (instead of <code>setName()</code>). O domain models could expose property read accessors just in the form of <code>name()</code> (instead of <code>getName()</code>).</p>
              
              <p>To make MapStruct work with such models, there is now an SPI (service provider interface) which makes the discovery of property accessors customizable. This SPI comes in the form of the following contract:</p>
              <pre class='prettyprint linenums'>&#x000A;public interface AccessorNamingStrategy {&#x000A;&#x000A;    /* MethodType may be GETTER, SETTER, ADDER or OTHER */&#x000A;    MethodType getMethodType(ExecutableElement method);&#x000A;&#x000A;    String getPropertyName(ExecutableElement getterOrSetterMethod);&#x000A;&#x000A;    String getElementName(ExecutableElement adderMethod);&#x000A;&#x000A;    String getCollectionGetterName(String property);&#x000A;}</pre>
              <p>The MapStruct engine will pass all candidate methods of mapping source and target types to this SPI in order to detect their property accessors. Once you have created an implementation of the contract based on your project’s specific property naming conventions (<a href="https://github.com/mapstruct/mapstruct/blob/master/integrationtest/src/test/resources/namingStrategyTest/strategy/src/main/java/org/mapstruct/itest/naming/CustomAccessorNamingStrategy.java">an example</a> can be found in our test suite), it needs to be registered through the Java <a href="http://docs.oracle.com/javase/8/docs/api/index.html?java/util/ServiceLoader.html">service loader</a> mechanism. To do so, create the file <em>META-INF/services/org.mapstruct.ap.spi.AccessorNamingStrategy</em> with the fully-qualified name of your implementation as contents:</p>
              <pre class='prettyprint linenums'>&#x000A;com.example.CustomAccessorNamingStrategy</pre>
              <p>Note that in order to have MapStruct find your custom strategy, it must be added as dependency either to the project class path or to the factory path of the compilation.</p>
              
              <h3 id="improved_decorator_support">Improved decorator support</h3>
              
              <p><a href="/documentation/#section-decorators">Mapper decorators</a> have been supported for the default component model since Beta1. As of CR1, they can be used now with the Spring component model, too (CDI has its own notion of decorators which can be used just as is with MapStruct mappers). To enable a decorator, add it via <code>@DecoratedWith</code>:</p>
              <pre class='prettyprint linenums'>&#x000A;@Mapper(componentModel = "spring")&#x000A;@DecoratedWith( OrderMappingDecorator.class )&#x000A;public interface OrderMapper {&#x000A;&#x000A;    OrderDto orderToDto(Order order);&#x000A;}</pre>
              <p>The decorator is simply another Spring bean which implements the decorated type. It can have the generated mapper implementation injected using the “delegate” qualifier:</p>
              <pre class='prettyprint linenums'>&#x000A;@Component&#x000A;@Primary&#x000A;public class OrderMappingDecorator implements OrderMapper {&#x000A;&#x000A;    @Autowired&#x000A;    @Qualifier( "delegate" )&#x000A;    private OrderMapper delegate;&#x000A;&#x000A;    public OrderMappingDecorator() {&#x000A;    }&#x000A;&#x000A;    @Override&#x000A;    public OrderDto orderToDto(Order order) {&#x000A;        OrderDto dto = delegate.orderToDto( order );&#x000A;&#x000A;        // apply some additional custom mapping routine...&#x000A;&#x000A;        return dto;&#x000A;    }&#x000A;}</pre>
              <p>By adding the <code>@Primary</code> annotation to the decorator it is ensured that the decorated mapper can be obtained through dependency injection without the need for further qualification at injection points.</p>
              
              <h3 id="before_and_after_mapping_callbacks">Before and after mapping callbacks</h3>
              
              <p>Somewhat related to decorators is the new feature of before and after mapping <a href="/documentation#section-before-after">callback methods</a>. They are useful to implement generic before and after mapping logic for a wider range of source and target types. Whereas decorators are bound to a specific mapper contract, before and after mapping callbacks are bound to arbitrary source and target types.</p>
              
              <p>The following gives an example:</p>
              <pre class='prettyprint linenums'>&#x000A;@Mapper&#x000A;public abstract class VehicleMapper {&#x000A;&#x000A;    @BeforeMapping&#x000A;    protected void flushEntity(AbstractVehicle vehicle) {&#x000A;        // e.g. call EntityManager flush() to make sure the entity&#x000A;        // is populated with the right @Version before mapping it into the DTO&#x000A;    }&#x000A;&#x000A;    @AfterMapping&#x000A;    protected void fillTank(AbstractVehicle vehicle, @MappingTarget AbstractVehicleDto result) {&#x000A;        result.fuelUp( new Fuel( vehicle.getTankCapacity(), vehicle.getFuelType() ) );&#x000A;    }&#x000A;&#x000A;    public abstract CarDto toCarDto(Car car);&#x000A;}</pre>
              <p>All generated implementations of mapping methods with <code>AbstractVehicle</code> or a sub-type as source-type (such as <code>toCarDto()</code>) will invoke the method annotated with <code>@BeforeMapping</code> at the beginning. Similarly, all methods mapping <code>AbstractVehicle</code> or a sub-type into <code>AbstractVehicleDto</code> or a sub-type will invoke the method annotated with <code>@AfterMapping</code> at the end.</p>
              
              <p>Before and after mapping callback methods are a quite powerful mechanism to implement cross-cutting concerns common to a larger group of mapping methods. Refer to the JavaDocs of <code>@BeforeMapping</code> and <code>@AfterMapping</code> to learn more, e.g. about ordering of several lifecycle methods etc. Note that before and after mapping callback methods are considered and experimental features as of MapStruct 1.0. Based on feedback from using this feature in practice we may fine-tune semantics in a subsequent release.</p>
              
              <h3 id="whats_next">What’s next?</h3>
              
              <p>With CR 1 out, MapStruct 1.0 Final is getting in sight! Based on the number of bugs reported against CR1, we may either do another CR in two or three weeks or go straight to the Final. In parallel work on the MapStruct <a href="https://github.com/mapstruct/mapstruct-eclipse">Eclipse plug-in</a> continues. We plan to do a first Alpha release of that very soon. Stay tuned!</p>
              
              <p>Finally, some useful links:</p>
              
              <ul>
              <li>Get help at the <a href="https://groups.google.com/forum/?fromgroups#!forum/mapstruct-users">mapstruct-users</a> group</li>
              
              <li>Report bugs and feature requests via the <a href="https://github.com/mapstruct/mapstruct/issues">issue tracker</a></li>
              
              <li>Follow <a href="https://twitter.com/GetMapStruct">@GetMapStruct</a> on Twitter</li>
              
              <li>Follow MapStruct on <a href="https://plus.google.com/u/0/118070742567787866481/posts">Google+</a></li>
              </ul>
            </div>
          </div>
          <div class="post">
            <h3>
              <a href="/news/2015/03/05/arrays-configuration-inheritance-mapstruct-1_0_0_Beta4.html">Array mappings, configuration inheritance: MapStruct 1.0.0.Beta4 released</a>
            </h3>
            <h5>
              Gunnar Morling, 05 March 2015
            </h5>
            <div>
              
              <p>The MapStruct community proudly announces the release of MapStruct 1.0.0.Beta4!</p>
              
              <p>The new release provides support for mapping arrays of Java beans, re-use of mapping configurations via a brand-new inheritance mechanism and ordered setter invocations on the target side. We also fixed quite a few bugs. You can find the complete list of 48 issues in the <a href="https://github.com/mapstruct/mapstruct/issues?q=milestone%3A1.0.0.Beta4">change log</a>. When upgrading from a previous Beta release, please check out the <a href="https://github.com/mapstruct/mapstruct/wiki/Migration-notes">migration notes</a> for changes which may affect existing applications.</p>
              
              <p>One thing I’m especially excited about is the new MapStruct Eclipse plug-in which will give you an even better experience when using MapStruct within the Eclipse IDE. You’ll find out more below.</p>
              
              <p>This release has been a true team effort; Many, many thanks to <a href="https://github.com/sjaakd/">Sjaak Derksen</a>, <a href="https://github.com/agudian">Andreas Gudian</a>, <a href="https://github.com/timoe">Timo Eckhardt</a>, <a href="https://github.com/eforest">Ewald Volkert</a>, <a href="https://github.com/chschu">Christian Schuster</a>, <a href="https://github.com/shasait">Sebastian Hasait</a> and <a href="https://github.com/dilipkrish">Dilip Krishnan</a> who all worked on the Beta4 release.</p>
              
              <h3 id="array_mappings">Array mappings</h3>
              
              <p>While MapStruct has had support for mapping collections (<code>List</code>, <code>Set</code> etc.) of primitive and Java bean types for a long time, this was not the case for arrays. This is finally possible, so you can now declare mapping methods such as the following:</p>
              <pre class='prettyprint linenums'>&#x000A;@Mapper&#x000A;public interface CustomerMapper {&#x000A;&#x000A;    CustomerDto[] customersToDtos(Customer[] customers);&#x000A;&#x000A;    CustomerDto customerToDto(Customer customer);&#x000A;}</pre>
              <p>As known from collection mapping methods, the generated <code>customersToDtos()</code> implementation will invoke the <code>customerToDto()</code> method for mapping the individual array elements. Similar to collection mapping methods, you can use the <code>@IterableMapping</code> annotation for applying specific configuration options:</p>
              <pre class='prettyprint linenums'>&#x000A;@IterableMapping(dateFormat = "dd.MM.yyyy")&#x000A;String[] dateArrayToStringArray(Date[] dates);</pre>
              <p>If needed, you also can map between collections and arrays:</p>
              <pre class='prettyprint linenums'>&#x000A;CustomerDto[] customersToDtos(List&lt;Customer&gt; customers);</pre>
              <h3 id="configuration_inheritance">Configuration inheritance</h3>
              
              <p>With help of the new <code>@InheritConfiguration</code> annotation you can advice MapStruct to apply the configuration from one mapping method to another.</p>
              
              <p>This comes in handy for instance when having a “normal” mapping method and an update method for the same types. Instead of configuring both methods individually, you can let one method inherit the configuration from the other:</p>
              <pre class='prettyprint linenums'>&#x000A;@Mapping(target="lastName", source="surName")&#x000A;@Mapping(target="accountNumber", source="customerNumber")&#x000A;Customer customerDtoToCustomer(CustomerDto customerDto);&#x000A;&#x000A;@InheritConfiguration&#x000A;void updateCustomerFromDto(CustomerDto dto, @MappingTarget customer);</pre>
              <p>The <code>@InheritConfiguration</code> annotation will let the <code>updateCustomerFromDto()</code> inherit all the mappings from <code>customerDtoToCustomer()</code>. The selection of the template method is done by matching source and target types, but you could explicitly specify a method as configuration source if needed.</p>
              
              <p>Configuration inheritance is particularly useful when working with complex type hierarchies. You can define a configuration for the base types of the source and target models and let specific mapping methods inherit this configuration. But what if a base type is abstract? Naturally, MapStruct cannot generate an implementation of a method whose return type is an abstract one.</p>
              
              <p>This can be resolved by declaring a “prototype method” within a <a href="/documentation/#section-shared-config">configuration class</a> referenced by the mapper:</p>
              <pre class='prettyprint linenums'>&#x000A;@Mapper(config=BaseMappings.class)&#x000A;public interface CustomerMapper {&#x000A;&#x000A;    @InheritConfiguration(name="anyDtoToEntity")&#x000A;    CustomerDto customerToDto(Customer customer);&#x000A;}</pre><pre class='prettyprint linenums'>&#x000A;@MapperConfig&#x000A;public interface BaseMappings {&#x000A;&#x000A;    // no implementation will be generated, it only serves as configuration source&#x000A;    @Mapping(target = "primaryKey", source = "id")&#x000A;    BaseDto anyEntityToDto(BaseEntity entity);&#x000A;}</pre>
              <p>Methods declared within configuration classes such as <code>BaseMappings</code> are not usable as mapping methods themselves (no implementation will be generated for them). They solely serve as configuration source. In the example the <code>customerToDto()</code> method would inherit the configuration given at <code>anyEntityToDto()</code>.</p>
              
              <p>Note that you optionally can have prototype configurations automatically be applied to methods with compatbile source and target types. You can find the details in the <a href="/documentation/#section-inherit-config">reference documentation</a>.</p>
              
              <h3 id="ordered_setter_invocations">Ordered setter invocations</h3>
              
              <p>Sometimes it is required to invoke the setters of the target bean in a specific order, e.g. if one setter depends on the value of other properties of the same bean. For that purpose there is a new attribute on the <code>@Mapping</code> annotation, <code>dependsOn()</code>. The following shows an example:</p>
              <pre class='prettyprint linenums'>&#x000A;@Mapping(target = "givenName", source = "firstName")&#x000A;@Mapping(target = "middleName", dependsOn = "givenName")&#x000A;@Mapping(target = "lastName", dependsOn = "middleName")&#x000A;AddressDto addressToDto(Address address);</pre>
              <p>This configuration makes sure that the generated implementation of <code>addressToDto()</code> first calls <code>setGivenName()</code>, then <code>setMiddleName()</code> and finally <code>setLastName()</code>. A single property can also depend on several other ones:</p>
              <pre class='prettyprint linenums'>&#x000A;@Mapping(target = "lastName", dependsOn = { "firstName", "middleName"})&#x000A;AddressDto addressToDto(Address address);</pre>
              <p>This would ensure that <code>setLastName()</code> is invoked after <code>setGivenName()</code> and <code>setMiddleName()</code>, but no guarantee is given for the order of these two.</p>
              
              <h3 id="mapstruct_eclipse_plugin">MapStruct Eclipse plug-in</h3>
              
              <p>Being a JSR 269 annotation processor, MapStruct is meant to run equally well within command line builds (plain javac, Mavent etc.) as well as IDEs. Indeed the annotation processor works nicely for instance in Eclipse, generating mappers upon save, showing error markers next to the affected elements etc.</p>
              
              <p>Still there are some advanced features which cannot be provided by an annotation processor, e.g. auto-completion for annotation attributes, refactoring support, navigation to referenced elements and more. This is where the <a href="https://github.com/mapstruct/mapstruct-eclipse/">MapStruct Eclipse plug-in</a> comes in.</p>
              
              <p>Developed by my good friend <a href="https://github.com/larswetzer">Lars Wetzer</a>, it aims at providing an even better experience when using MapStruct within Eclipse. The plug-in is still at a very early stage, currently it provides auto-completion for <code>@Mapping#source()</code> and <code>target()</code>. The following shows a screenshot:</p>
              <div style='text-align:center'>
                  <img src='/images/mapstruct-eclipse-plugin.png' style='padding-bottom: 3px;' />
              </div>
              <p>More functionality will be coming soon. You can find the list of features planned for the plug-in <a href="https://github.com/mapstruct/mapstruct-eclipse/issues">here</a>. There is no official release of the plug-in yet. But if you feel adventurous, you can install the latest nightly build from the <a href="https://mapstruct.ci.cloudbees.com/job/mapstruct-eclipse/lastSuccessfulBuild/artifact/org.mapstruct.eclipse.repository/target/repository/">update site</a> at our CI server.</p>
              
              <h3 id="download">Download</h3>
              
              <p>If you work with Maven, Gradle or another dependency management tool, use the following GAV coordinates to obtain the MapStruct artifacts from Maven Central:</p>
              
              <ul>
              <li><a href="http://search.maven.org/#artifactdetails&#124;org.mapstruct&#124;mapstruct&#124;1.0.0.Beta4&#124;jar">org.mapstruct:mapstruct:1.0.0.Beta4</a> for the annotation JAR (to be used with Java &lt;= 7) or <a href="http://search.maven.org/#artifactdetails&#124;org.mapstruct&#124;mapstruct-jdk8&#124;1.0.0.Beta4&#124;jar">org.mapstruct:mapstruct-jdk8:1.0.0.Beta4</a> (for usage with Java &gt;= 8)</li>
              
              <li><a href="http://search.maven.org/#artifactdetails&#124;org.mapstruct&#124;mapstruct-processor&#124;1.0.0.Beta4&#124;jar">org.mapstruct:mapstruct-processor:1.0.0.Beta4</a> for the annotation processor.</li>
              </ul>
              
              <p>Alternatively, you can download distribution bundles (ZIP, TAR.GZ) from <a href="http://sourceforge.net/projects/mapstruct/files/1.0.0.Beta4/">SourceForge</a>.</p>
              
              <p>The Beta4 contains almost all the features we envisioned for the 1.0 release. We’ll now focus on bug-fixing and addressing some more minor edge cases. The CR1 (candidate release) should be out in four to six weeks from now, followed by 1.0 Final after four more weeks from there.</p>
              
              <p>Finally, some useful links:</p>
              
              <ul>
              <li>Get help at the <a href="https://groups.google.com/forum/?fromgroups#!forum/mapstruct-users">mapstruct-users</a> group</li>
              
              <li>Report bugs and feature requests via the <a href="https://github.com/mapstruct/mapstruct/issues">issue tracker</a></li>
              
              <li>Follow <a href="https://twitter.com/GetMapStruct">@GetMapStruct</a> on Twitter</li>
              
              <li>Follow MapStruct on <a href="https://plus.google.com/u/0/118070742567787866481/posts">Google+</a></li>
              </ul>
            </div>
          </div>
          <div class="post">
            <h3>
              <a href="/news/2014/11/30/mapstruct-1_0_0_Beta3-nested-properties.html">MapStruct 1.0.0.Beta3 is out with nested properties, qualifiers and more</a>
            </h3>
            <h5>
              Gunnar Morling, 30 November 2014
            </h5>
            <div>
              
              <p>I’m delighted to announce the release of MapStruct 1.0.0.Beta3.</p>
              
              <p>This version brings the long awaited support for mapping nested source properties, built-in mappings for Java 8 date/time types, fine-grained selection of mapping methods via qualifiers and much more. You can find the complete list of a whopping 46 closed issues <a href="https://github.com/mapstruct/mapstruct/issues?page=2&q=milestone%3A1.0.0.Beta3+is%3Aclosed">here</a>.</p>
              
              <p>Note that existing applications using MapStruct need to adapt to some changes we had to do in order to iron out some glitches from the previous beta releases. These changes are described in more detail at the end of this post.</p>
              
              <p>Before diving into the details, let me say a huge thank you to <a href="https://github.com/sjaakd/">Sjaak Derksen</a>, <a href="https://github.com/agudian">Andreas Gudian</a>, <a href="https://github.com/timoe">Timo Eckhardt</a> and <a href="https://github.com/chschu">Christian Schuster</a>! Again you guys went far beyond what anyone could have hoped for; this release would not have been possible without you.</p>
              
              <h3 id="mapping_nested_properties">Mapping nested properties</h3>
              
              <p>One of the most wished-for features in MapStruct was to map attributes from nested elements of a source object (tree) into target objects. That’s finally possible now, using simple “dot paths”, just as you’d expect it:</p>
              <pre class='prettyprint linenums'>&#x000A;@Mapper&#x000A;public interface CustomerMapper {&#x000A;&#x000A;    @Mapping(source = "address.firstName", target = "firstName")&#x000A;    @Mapping(source = "address.lastName", target = "lastName")&#x000A;    CustomerDto customerToDto(Customer customer);&#x000A;}</pre>
              <p>This mapping method will map the <code>firstName</code> and <code>lastName</code> attributes from the <code>Address</code> object referenced by the mapped <code>Customer</code> object to the <code>firstName</code> and <code>lastName</code> properties of the target object.</p>
              
              <p>Of course you also can refer to properties nested deeper in the hierarchy, e.g. <code>address.city.name</code>. That’s a great way to flatten and select parts of complex hierarchies e.g. for view objects returned to a client.</p>
              
              <h3 id="improved_builtin_mappings">Improved built-in mappings</h3>
              
              <p>There is now built-in support for the Java 8 time and date types (JSR 310). That means properties of types such as <code>java.time.ZonedDateTime</code> or <code>java.time.LocalDateTime</code> will automatically be mapped to <code>String</code>s as well as the legacy date types <code>java.util.Calendar</code> and <code>java.util.Date</code>. Also <code>java.util.Calendar</code> will automatically mapped to <code>String</code> and <code>java.util.Date</code>.</p>
              
              <p>Refer to the <a href="/documentation/#section-05">documentation</a> for the list of all built-in mappings.</p>
              
              <p>Another improvement relates to the mapping of collection-typed properties. Let’s assume the <code>Order</code> class from the previous example had a <code>List&lt;OrderLine&gt;</code> which should be mapped to a list of DTOs in the target object. So far you would have been required to declare a method such as the following on the mapper interface:</p>
              <pre class='prettyprint linenums'>&#x000A;List&lt;OrderLineDto&gt; orderLinesToOrderLineDtos(Iterable&lt;OrderLine&gt; orderLines);</pre>
              <p>That’s not necessary any longer, it will now be added automatically as a private method to the generated mapper class if required.</p>
              
              <h3 id="qualifiers">Qualifiers</h3>
              
              <p>Qualifiers provide a way to resolve ambiguities in case several mapping methods are suitable to map a given bean property. E.g. let’s assume you’d have two methods for mapping <code>Date</code>s into <code>String</code>s in a manually implemented mapper class:</p>
              <pre class='prettyprint linenums'>&#x000A;public class DateMapper {&#x000A;&#x000A;    // returns e.g. 2014-30-11&#x000A;    String dateToString(Date date) { ... }&#x000A;&#x000A;    // returns e.g. 2014-30-11 18:16&#x000A;    String dateToStringWithTime(Date date) { ... }&#x000A;}</pre>
              <p>That mapper is used by MapStruct-generated mapper:</p>
              <pre class='prettyprint linenums'>&#x000A;@Mapper(uses=DateMapper.class)&#x000A;public class OrderMapper {&#x000A;&#x000A;    // Order#date of type Date, OrderDto#date of type String&#x000A;    OrderDto orderToOrderDto(Order order);&#x000A;}</pre>
              <p>In previous releases you’d have gotten an error during generation, as both methods from <code>DateMapper</code> are suitable to map the <code>date</code> property. You can now use qualifiers to resolve that ambiguity and specify which method should be used. To do so, define a simple qualifier annotation type:</p>
              <pre class='prettyprint linenums'>&#x000A;@Qualifier&#x000A;@Target(ElementType.METHOD)&#x000A;public @interface ShortDate {}</pre>
              <p>Tag mapping methods using such qualifiers like so:</p>
              <pre class='prettyprint linenums'>&#x000A;public class DateMapper {&#x000A;&#x000A;    @ShortDate&#x000A;    String dateToString(Date date) { ... }&#x000A;&#x000A;    @LongDate&#x000A;    String dateToStringWithTime(Date date) { ... }&#x000A;}</pre>
              <p>And specify a qualifier via <code>@Mapping</code> for the concerned property:</p>
              <pre class='prettyprint linenums'>&#x000A;@Mapper(uses=DateMapper.class)&#x000A;public class OrderMapper {&#x000A;&#x000A;    @Mapping(target="date", qualifiedBy = ShortDate.class)&#x000A;    OrderDto orderToOrderDto(Order order);&#x000A;}</pre>
              <p>This will make sure that the <code>dateToString()</code> method will be invoked to map the order date property. If required, you also could specify several qualifiers via <code>qualifiedBy()</code>.</p>
              
              <h3 id="migration_notes">Migration notes</h3>
              
              <p>For the sake of increased consistency and better usability, we had to do some changes which may require existing applications which already use MapStruct to be adapted. Most prominently, <a href="/documentation/#section-10">reverse mapping methods</a> must now be explicitly marked as such using the new <code>@InheritInverseConfiguration</code> annotation:</p>
              <pre class='prettyprint linenums'>&#x000A;@Mapper(uses=DateMapper.class)&#x000A;public class OrderMapper {&#x000A;&#x000A;    OrderDto orderToOrderDto(Order order);&#x000A;&#x000A;    @InheritInverseConfiguration&#x000A;    Order orderDtoToOrder(OrderDto order);&#x000A;}</pre>
              <p>That annotation makes it explicit which one is the reverse mapping method and thus should inherit the configuration from its counterpart. You still can add further mappings to the reverse method in order to amend or override the inherited mappings. <code>@InheritInverseConfiguration</code> can also be used to specify the name of the method to inherit from in case several methods qualify as per their source and target types.</p>
              
              <p>Another change affects the existing <a href="http://localhost:9009/documentation/#section-02-01">processor options</a>. In order to avoid conflicts with other annotation processors, these options must now be given using the “mapstruct.” prefix, e.g. “mapstruct.suppressGeneratorTimestamp”.</p>
              
              <p>We have created a <a href="https://github.com/mapstruct/mapstruct/wiki/Migration-notes">wiki page</a> where we’ll collect all incompatible changes for future releases. Of course we’ll try hard to avoid this sort of changes whenever possible.</p>
              
              <h3 id="how_do_i_get_it">How do I get it?</h3>
              
              <p>You can fetch distribution bundles (ZIP, TAR.GZ) from <a href="http://sourceforge.net/projects/mapstruct/files/1.0.0.Beta3/">SourceForge</a>. Alternatively, you can obtain the dependencies from Maven Central. The GAV coordinates are:</p>
              
              <ul>
              <li><a href="http://search.maven.org/#artifactdetails&#124;org.mapstruct&#124;mapstruct&#124;1.0.0.Beta3&#124;jar">org.mapstruct:mapstruct:1.0.0.Beta3</a> for the annotation JAR (to be used with Java &lt;= 7) or <a href="http://search.maven.org/#artifactdetails&#124;org.mapstruct&#124;mapstruct-jdk8&#124;1.0.0.Beta3&#124;jar">org.mapstruct:mapstruct-jdk8:1.0.0.Beta3</a> (for usage with Java &gt;= 8)</li>
              
              <li><a href="http://search.maven.org/#artifactdetails&#124;org.mapstruct&#124;mapstruct-processor&#124;1.0.0.Beta3&#124;jar">org.mapstruct:mapstruct-processor:1.0.0.Beta3</a> for the annotation processor.</li>
              </ul>
              
              <p>The Beta3 release is planned to be the last beta, next will be CR1 (candidate release).</p>
              
              <p>Anything you’d like to propose for inclusion in the 1.0 Final release? Then let us know by commenting below or posting to the <a href="https://groups.google.com/forum/?fromgroups#!forum/mapstruct-users">mapstruct-users</a> group. Bugs and feature requests can be reported in the <a href="https://github.com/mapstruct/mapstruct/issues">issue tracker</a>. And if you’d like to hack on MapStruct yourself, check out the <a href="/contributing">development guide</a>.</p>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="span12">
          <hr>
            <div class="pagination-links"><a href="/news/tags/news/" class="previous-link">Previous</a> <a href="/news/tags/news/" class="page-link">1</a> <span class="current-page">2</span> <a href="/news/tags/news/page/3.html" class="page-link">3</a> <a href="/news/tags/news/page/3.html" class="next-link">Next</a> </div>
          </hr>
        </div>
      </div>
      <hr>
      <footer>
        <p>&copy; Gunnar Morling 2016</p>
      </footer>
    </div>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount','UA-41136939-1']);
    _gaq.push(['_gat._anonymizeIp']);
    _gaq.push(['_trackPageview']);
    (function() {
     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </body>
</html>
